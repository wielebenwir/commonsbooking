!function(u){"use strict";u(function(){let n=u("#full-day"),t=u("#repetition-start_time"),o=u("#repetition-end_time"),a=!1,i=(n.on("change",function(e){n.is(":checked")?(t.val("00:00"),o.val("23:59"),t.hide(),o.hide()):(t.show(),o.show())}),n.trigger("change"),u("#item-id")),r=u("#location-id"),c=u("#repetition-start_date"),s=u("#_cb_bookingcode");i.on("change",function(e){var t={itemID:i.val()};u.post(cb_ajax_get_bookable_location.ajax_url,{_ajax_nonce:cb_ajax_get_bookable_location.nonce,action:"cb_get_bookable_location",data:t},function(e){e.success&&(r.val(e.locationID),n.prop("checked",e.fullDay),n.trigger("change"))}).then(()=>{l()})}),i.trigger("change");const l=()=>{var e;n.is(":checked")&&(e={itemID:i.val(),locationID:r.val(),startDate:c.val()},u.post(cb_ajax_get_booking_code.ajax_url,{_ajax_nonce:cb_ajax_get_booking_code.nonce,action:"cb_get_booking_code",data:e},function(e){e.success?(s.val(e.bookingCode),a=!1):a||s.val("")}))};s.on("keyup",function(e){a=!0}),c.on("change",function(e){l()}),n.on("change",function(e){l()})})}(jQuery),function(T){"use strict";T(function(){function p(){var t=T("#"+_+"_repeat");t.on("cmb2_add_row cmb2_remove_row cmb2_shift_rows_complete",function(){p()});for(let e=0;e<t.children().length-1;e++){var n=T("#"+E+e);let a=n.find("#"+_+"_"+e+"_rule-type"),i=n.find('[class*="rule-description"]').find(".cmb2-metabox-description"),r=n.find('[class*="rule-param1"]');var o=r.find(".cmb2-text-small");let c=T(o.labels()[0]),s=r.find(".cmb2-metabox-description"),l=n.find('[class*="rule-param2"]');o=l.find(".cmb2-text-small");let u=T(o.labels()[0]),f=l.find(".cmb2-metabox-description"),d=n.find('[class*="rule-select-param"]'),h=d.find(".cmb2-metabox-description"),g=d.find(".cmb2_select");a.change(function(){p()});const m=T("option:selected",a).val();cb_booking_rules.forEach(t=>{if(t.name==m){if(i.text(t.description),a.width(300),t.hasOwnProperty("params")&&0<t.params.length)switch(t.params.length){case 1:r.show(),l.hide(),c.text(t.params[0].title),s.text(t.params[0].description),l.val("");break;case 2:r.show(),l.show(),c.text(t.params[0].title),s.text(t.params[0].description),u.text(t.params[1].title),f.text(t.params[1].description)}else r.hide(),r.val(""),l.hide(),l.val("");if(t.hasOwnProperty("selectParam")&&0<t.selectParam.length){d.show(),h.text(t.selectParam[0]);var e,n=t.selectParam[1];for(e in g.empty(),n)g.append(T("<option>",{value:e,text:n[e]}));g.width(150);var o=cb_applied_booking_rules.filter(e=>e.name==t.name);1===o.length&&g.val(o[0].appliedSelectParam)}else d.hide()}})}}function a(){var t=T("#"+_+"_repeat");t.on("cmb2_add_row cmb2_remove_row cmb2_shift_rows_complete",function(){a()});for(let e=0;e<t.children().length-1;e++){var n=T("#"+E+e),o=n.find('[class*="rule-applies-all"]').find(".cmb2-option"),n=n.find('[class*="rule-applies-categories"]');o.change(function(){a()}),o.prop("checked")?n.hide():n.show()}}const _="rules_group",E="cmb-group-rules_group-";p(),a()})}(jQuery),function(i){"use strict";i(function(){var e=i("#holiday_load_btn");const o=i("#timeframe_manual_date");var t=i("#cmb2_multiselect_datepicker"),a=e=>{var t=e.getDate(),n=e.getMonth()+1,t=t<=9?"0"+t:t,n=n<=9?"0"+n:n,e=e.getFullYear()+"-"+n+"-"+t;0<o.val().length?","!==o.val().slice(-1)?o.val(o.val()+","+e):o.val(o.val()+e):o.val(e+",")};t.length&&t.datepicker({onSelect:function(e,t){var n=i(this).datepicker("getDate");a(n)}}),e.length&&e.click(function(){var e,t;e=i("#_cmb2_holidayholiday_year").val(),t=i("#_cmb2_holidayholiday_state").val(),feiertagejs.getHolidays(e,t).forEach(e=>{e=new Date(e.date);a(e)})})})}(jQuery),function(l){"use strict";l(function(){function e(e){l.each(e,function(){l(this).parents(".cmb-row").hide()})}function t(e){l.each(e,function(){l(this).parents(".cmb-row").show()})}function n(){(c.prop("checked")?t:e)(s)}function o(){r.prop("checked")?(t(c),n()):(e(c),e(s))}function a(){i.prop("checked")?(e(r),e(c),e(s)):(t(r),t(c),n())}const i=l("#_cb_use_global_settings"),r=l("#_cb_allow_lockdays_in_range"),c=l("#_cb_count_lockdays_in_range"),s=l("#_cb_count_lockdays_maximum");n(),c.change(function(){n()}),o(),r.change(function(){o()});a(),i.change(function(){a()})})}(jQuery),function(o){"use strict";o(function(){o("#cmb2-metabox-migration #migration-start").on("click",function(e){e.preventDefault(),o("#migration-state").show(),o("#migration-in-progress").show();const t=e=>{o.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_migration",data:e,geodata:o("#get-geo-locations").is(":checked")},function(e){let n=!0;o.each(e,function(e,t){o("#"+e+"-index").text(t.index),o("#"+e+"-count").text(t.count),"0"==t.complete&&(n=!1)}),n?(o("#migration-in-progress").hide(),o("#migration-done").show()):t(e)})};t(!1)}),o("#cmb2-metabox-migration #booking-update-start").on("click",function(e){e.preventDefault(),o("#booking-migration-in-progress").show(),o.post(cb_ajax_start_migration.ajax_url,{_ajax_nonce:cb_ajax_start_migration.nonce,action:"cb_start_booking_migration"}).done(function(){o("#booking-migration-in-progress").hide(),o("#booking-migration-done").show()}).fail(function(){o("#booking-migration-in-progress").hide(),o("#booking-migration-failed").show()})})})}(jQuery),function(t){"use strict";t(function(){const e=t("input[name=post_type][value=cb_restriction]").parent("form");e.find("input, select, textarea").on("keyup change paste",function(){e.find("input[name=restriction-send]").prop("disabled",!0)})})}(jQuery),function(o){"use strict";o(function(){if(o("#templates").length){const t=o("#emailtemplates_mail-booking_ics_attach");const n=[o("#emailtemplates_mail-booking_ics_event-title"),o("#emailtemplates_mail-booking_ics_event-description")],e=function(){var e;e=n,o.each(e,function(){o(this).parents(".cmb-row").show()}),t.prop("checked")||(e=n,o.each(e,function(){o(this).parents(".cmb-row").hide()}),t.prop("checked",!1))};e(),t.click(function(){e()})}})}(jQuery),function(x){"use strict";x(function(){const n=function(t,e){var n=[];return jQuery.grep(e,function(e){-1==jQuery.inArray(e,t)&&n.push(e)}),n},o=function(e){x.each(e,function(){x(this).parents(".cmb-row").hide()})},a=function(e){x.each(e,function(){x(this).parents(".cmb-row").show()})};var e=x("#cmb2-metabox-cb_timeframe-custom-fields");if(e.length){const h=x("#timeframe-repetition"),g=x("#type"),m=x("#grid"),p=x("#weekdays1");var e=x("#start-time"),t=x("#end-time"),i=x("#title-timeframe-rep-config");const _=x("#repetition-start"),E=x("#repetition-end"),T=x("#full-day"),b=x("#title-timeframe-booking-codes"),A=x("#show-booking-codes"),R=x("#create-booking-codes");var r=x("#booking-codes-download"),c=x("#booking-codes-list");const I=x(".cmb2-id--cmb2-holiday");x("#timeframe_manual_date");const w=x("#cmb2_multiselect_datepicker"),S=x(".cmb2-id-timeframe-manual-date");var s=x("#timeframe-max-days"),l=x("#timeframe-advance-booking-days"),u=x("#booking-startday-offset"),f=x("#title-bookings-config"),d=x("#allowed_user_roles");const v=[i,T,e,t,p,_,E,m],G=[T,e,t,m,_,E],N=[m,e,t],H=[R,c,r,A],k=[s,l,u,d,f],y=function(){var e=x("option:selected",g).val(),t=x("option:selected",h).val();"2"===e?(a(k),a(b),I.hide()):(o(k),o(b),"3"==e&&"manual"==t?I.show():I.hide())},L=(y(),g.change(function(){y()}),function(){x("option:selected",h).val();(T.prop("checked")?(m.prop("selected",!1),o):a)(N)}),M=(L(),T.change(function(){L()}),function(){var e=x("option:selected",h).val(),t=x("option:selected",g).val();e?("norep"==e?(a(G),o(n(G,v))):(a(v),o(n(v,G))),"manual"===e?(S.show(),w.show(),o(_),o(E),"3"==t?I.show():I.hide()):(S.hide(),w.hide(),a(_),a(E)),"w"===e?p.parents(".cmb-row").show():(p.parents(".cmb-row").hide(),t=x("input[name*=weekdays]"),x.each(t,function(){x(this).prop("checked",!1)})),L()):(o(G),o(v))}),D=(M(),h.change(function(){M()}),function(){var e=T.prop("checked"),t=g.val(),n=_.val();o(H),n&&e&&"2"===t&&(a(H),R.prop("checked")||(o([A]),A.prop("checked",!1)))});D();i=[_,E,T,g,R];x.each(i,function(e,t){t.change(function(){D()})})}})}(jQuery),function(e){"use strict";e(function(){e(document).tooltip()})}(jQuery),function(e,t){var n,o;"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e.feiertagejs,o=e.feiertagejs={},t(o),o.noConflict=function(){return e.feiertagejs=n,o})}(this,function(e){"use strict";const i=["NEUJAHRSTAG","HEILIGEDREIKOENIGE","KARFREITAG","OSTERSONNTAG","OSTERMONTAG","TAG_DER_ARBEIT","CHRISTIHIMMELFAHRT","MARIAHIMMELFAHRT","PFINGSTSONNTAG","PFINGSTMONTAG","FRONLEICHNAM","DEUTSCHEEINHEIT","REFORMATIONSTAG","ALLERHEILIGEN","BUBETAG","ERSTERWEIHNACHTSFEIERTAG","ZWEITERWEIHNACHTSFEIERTAG","WELTKINDERTAG","WELTFRAUENTAG","AUGSBURGER_FRIEDENSFEST"],t=["BW","BY","BE","BB","HB","HE","HH","MV","NI","NW","RP","SL","SN","ST","SH","TH","BUND","AUGSBURG","ALL"];let n="de";const r={de:{NEUJAHRSTAG:"Neujahrstag",HEILIGEDREIKOENIGE:"Heilige Drei Könige",KARFREITAG:"Karfreitag",OSTERSONNTAG:"Ostersonntag",OSTERMONTAG:"Ostermontag",TAG_DER_ARBEIT:"Tag der Arbeit",CHRISTIHIMMELFAHRT:"Christi Himmelfahrt",PFINGSTSONNTAG:"Pfingstsonntag",PFINGSTMONTAG:"Pfingstmontag",FRONLEICHNAM:"Fronleichnam",MARIAHIMMELFAHRT:"Mariä Himmelfahrt",DEUTSCHEEINHEIT:"Tag der Deutschen Einheit",REFORMATIONSTAG:"Reformationstag",ALLERHEILIGEN:"Allerheiligen",BUBETAG:"Buß- und Bettag",ERSTERWEIHNACHTSFEIERTAG:"1. Weihnachtstag",ZWEITERWEIHNACHTSFEIERTAG:"2. Weihnachtstag",WELTKINDERTAG:"Weltkindertag",WELTFRAUENTAG:"Weltfrauentag",AUGSBURGER_FRIEDENSFEST:"Augsburger Friedensfest"}};function o(e,t){a(t);var n=e.getFullYear(),e=d(e);return-1!==function(e,t){e=c(e,t);return e.map(e=>d(e.date))}(n,t).indexOf(e)}function a(e){if(null==e)throw new Error("Region must not be undefined or null");if(-1===t.indexOf(e))throw new Error(`Invalid region: ${e}! Must be one of `+t.toString())}function c(e,t){var n=function(e){var t=Math.floor(e/100),n=e-19*Math.floor(e/19),o=Math.floor((t-17)/25);o=t-Math.floor(t/4)-Math.floor((t-o)/3)+19*n+15,o=(o-=30*Math.floor(o/30))-Math.floor(o/28)*(1-Math.floor(o/28)*Math.floor(29/(1+o))*Math.floor((21-n)/11)),n=e+Math.floor(e/4)+o+2-t+Math.floor(t/4);n-=7*Math.floor(n/7);t=o-n,o=3+Math.floor((40+t)/44),n=28+t-31*Math.floor(o/4);return new Date(e,o-1,n)}(e),o=l(new Date(n.getTime()),-2),a=l(new Date(n.getTime()),1),i=l(new Date(n.getTime()),39),r=l(new Date(n.getTime()),49),c=l(new Date(n.getTime()),50),s=[...[f("NEUJAHRSTAG",u(s=e,1,1)),f("TAG_DER_ARBEIT",u(s,5,1)),f("DEUTSCHEEINHEIT",u(s,10,3)),f("ERSTERWEIHNACHTSFEIERTAG",u(s,12,25)),f("ZWEITERWEIHNACHTSFEIERTAG",u(s,12,26))],f("KARFREITAG",o),f("OSTERMONTAG",a),f("CHRISTIHIMMELFAHRT",i),f("PFINGSTMONTAG",c)];return o=e,a=s,"BW"!==(i=t)&&"BY"!==i&&"AUGSBURG"!==i&&"ST"!==i&&"ALL"!==i||a.push(f("HEILIGEDREIKOENIGE",u(o,1,6))),c=n,i=r,a=s,"BB"!==(o=t)&&"ALL"!==o||a.push(f("OSTERSONNTAG",c),f("PFINGSTSONNTAG",i)),r=n,o=s,"BW"!==(a=t)&&"BY"!==a&&"AUGSBURG"!==a&&"HE"!==a&&"NW"!==a&&"RP"!==a&&"SL"!==a&&"ALL"!==a||(a=l(new Date(r.getTime()),60),o.push(f("FRONLEICHNAM",a))),c=e,i=s,"SL"!==(n=t)&&"BY"!==n&&"AUGSBURG"!==n&&"ALL"!==n||i.push(f("MARIAHIMMELFAHRT",u(c,8,15))),r=t,o=s,2017!==(a=e)&&"NI"!==r&&"BB"!==r&&"HB"!==r&&"HH"!==r&&"MV"!==r&&"SN"!==r&&"ST"!==r&&"TH"!==r&&"SH"!==r&&"ALL"!==r||o.push(f("REFORMATIONSTAG",u(a,10,31))),n=e,i=s,"BW"!==(c=t)&&"BY"!==c&&"AUGSBURG"!==c&&"NW"!==c&&"RP"!==c&&"SL"!==c&&"ALL"!==c||i.push(f("ALLERHEILIGEN",u(n,11,1))),r=e,o=s,"SN"!==(a=t)&&"ALL"!==a||(a=function(e){e=new Date(e,11,25,12,0,0);let t=e.getDay()%7;0===t&&(t=7);var n=t+32;e=new Date(e.getTime());return l(e,-n)}(r),o.push(f("BUBETAG",u(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate())))),c=t,i=s,2019<=(n=e)&&("TH"===c||"ALL"===c)&&i.push(f("WELTKINDERTAG",u(n,9,20))),r=t,o=s,(a=e)<=2018||("BE"!==r&&"ALL"!==r||o.push(f("WELTFRAUENTAG",u(a,3,8))),"MV"===r&&2023<=a&&o.push(f("WELTFRAUENTAG",u(a,3,8)))),c=e,i=s,"AUGSBURG"===t&&i.push(f("AUGSBURGER_FRIEDENSFEST",u(c,8,8))),s.sort((e,t)=>e.date.getTime()-t.date.getTime())}function l(e,t){var n=new Date(e);return n.setDate(e.getDate()+t),n}function u(e,t,n){return new Date(e,t-1,n)}function f(e,t){return{name:e,date:t,dateString:s(t),trans(e=n){return console.warn('FeiertageJs: You are using "Holiday.trans() method. This will be replaced in the next major version with translate()"'),this.translate(e)},translate(e=n){return null==e?void 0:r[e][this.name]},getNormalizedDate(){return d(this.date)},equals(e){e=s(e);return this.dateString===e}}}function s(e){e=new Date(e.getTime()-60*e.getTimezoneOffset()*1e3);return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,10)}function d(e){e=new Date(e);return e.setHours(0,0,0,0),e.getTime()}e.addTranslation=function(e,t){var e=e.toLowerCase(),n=r.de;let o=!1;for(const a of i)t[a]||(o=!0,t[a]=n[a]);o&&console.warn("[feiertagejs] addTranslation: you did not add all holidays in your translation! Took German as fallback"),r[e]=t},e.getHolidayByDate=function(t,e="ALL"){return a(e),c(t.getFullYear(),e).find(e=>e.equals(t))},e.getHolidays=function(e,t){let n;return n="string"==typeof e?parseInt(e,10):e,a(t),c(n,t)},e.getLanguage=function(){return n},e.isHoliday=o,e.isSpecificHoliday=function(t,e,n="ALL"){a(n);var o=e;if(null==o)throw new TypeError("holidayName must not be null or undefined");if(-1===i.indexOf(o))throw new Error(`feiertage.js: invalid holiday type "${o}"! Must be one of `+i.toString());return!!(o=c(t.getFullYear(),n).find(e=>e.equals(t)))&&o.name===e},e.isSunOrHoliday=function(e,t){return a(t),0===e.getDay()||o(e,t)},e.setLanguage=function(e){var t=e.toLowerCase();if(!r[t])throw new TypeError(`[feiertagejs] tried to set language to ${t} but the translation is missing. Please use addTranslation(isoCode,object) first`);n=e}});